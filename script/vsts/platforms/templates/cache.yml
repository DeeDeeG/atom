parameters:
  - name: OS
    displayName: Operating System
    type: string
    values:
      - windows
      - linux
      - macos

steps:
  - task: Cache@2
    displayName: Cache node_modules
    inputs:
      key: 'npm_pr_4 | "$(Agent.OS)" | "$(BUILD_ARCH)" | package.json, package-lock.json, apm/package.json, script/package.json, script/package-lock.json, script/vsts/platforms/${{ parameters.OS }}.yml, script/vsts/platforms/templates/preparation.yml'
      path: 'script/node_modules | apm/node_modules | node_modules'
      cacheHitVar: NodeModulesRestored
